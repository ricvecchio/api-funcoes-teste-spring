# =========================
# Servidor
# =========================
server.port=${KAFKA_SERVICE_PORT:8082}
spring.application.name=kafka-service
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local}

# =========================
# Banco de Dados
# =========================
spring.datasource.url=${SPRING_DATASOURCE_URL_KAFKA:jdbc:postgresql://postgres-db:5432/contas_db}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME_KAFKA:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD_KAFKA:postgres}
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false

# =========================
# Kafka Consumer
# =========================
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:kafka-broker:9092}
spring.kafka.consumer.group-id=${KAFKA_CONSUMER_GROUP_ID:kafka-service-group}
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# =========================
# Tópico principal
# =========================
conta.aberturas.topic=${KAFKA_TOPIC_CONTAS_ABRIR:conta-aberturas}

# =========================
# Log service URL
# =========================
log.service.url=${LOG_SERVICE_URL:http://log-service:8083/api/logs}

# =========================
# Actuator & Metrics (Datadog via Micrometer)
# =========================
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.probes.enabled=true

management.metrics.export.datadog.enabled=${DATADOG_ENABLED:false}
management.metrics.export.datadog.api-key=${DATADOG_API_KEY:}
management.metrics.export.datadog.uri=https://api.${DATADOG_SITE:datadoghq.com}
management.metrics.export.datadog.step=30s
management.metrics.tags.env=${DD_ENV:dev}
management.metrics.tags.service=${DD_SERVICE:kafka-service}
management.metrics.tags.version=${DD_VERSION:1.0.0}

# =========================
# Logging
# =========================
logging.level.com.funcoes=DEBUG
logging.level.org.springframework.kafka=INFO
